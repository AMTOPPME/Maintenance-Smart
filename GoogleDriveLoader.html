<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Opening Google Driveâ€¦</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root{
    --bg:#f3f4f6;
    --card-bg:#ffffff;
    --border:#e5e7eb;
    --accent:#2563eb;
    --text:#111827;
    --text-soft:#6b7280;
  }

  /* è·Ÿ Portal ä¸€æ¨£çš„ä¸»é¡Œè‰²åˆ‡æ› */
  html[data-style="panther"]{
    --bg:#ffe4ec;
    --card-bg:#ffffff;
    --accent:#111827;
  }
  html[data-style="hangyodon"]{
    --bg:#dbeafe;
    --card-bg:#ffffff;
    --accent:#0ea5e9;
  }

  body {
    margin:0;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
    background:var(--bg);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    color:var(--text);
  }

  .card {
    background:var(--card-bg);
    border-radius:20px;
    padding:24px 22px 26px;
    max-width:320px;
    width:92%;
    box-shadow:0 12px 32px rgba(15,23,42,.15);
    border:1px solid var(--border);
    text-align:center;
    position:relative;
    overflow:hidden;
  }

  /* å·¦ä¸Šå° mascotï¼Œè·Ÿ Portal é¢¨æ ¼ä¸€æ¨£ */
  .mascot-wrap{
    position:absolute;
    top:12px;
    left:12px;
    display:flex;
    align-items:center;
    gap:6px;
    font-size:11px;
    color:var(--text-soft);
  }

  .mascot{
    width:22px;
    height:22px;
    border-radius:8px;
    background:radial-gradient(circle at 30% 0,#bfdbfe,#2563eb);
    box-shadow:0 0 8px rgba(37,99,235,0.35);
    background-size:cover;
    background-position:center;
    flex-shrink:0;
  }

  /* panther / hangyodon åœ–ç‰‡ï¼ˆæª”æ¡ˆæ”¾åŒä¸€è³‡æ–™å¤¾ï¼‰ */
  html[data-style="panther"] .mascot{
    background-image:url("pinkpanther.png");
    box-shadow:0 0 8px rgba(148,27,80,0.45);
  }
  html[data-style="hangyodon"] .mascot{
    background-image:url("hangyodon.png");
    box-shadow:0 0 8px rgba(14,165,233,0.45);
  }

  .brand-text{
    display:none;
  }

  .loader {
    width:42px;
    height:42px;
    border-radius:50%;
    border:4px solid #dbeafe;
    border-top-color:var(--accent);
    margin:12px auto 16px;
    animation:spin .7s linear infinite;
  }

  @keyframes spin {
    to { transform:rotate(360deg); }
  }

  .title {
    font-size:18px;
    font-weight:600;
    margin-bottom:6px;
  }

  .desc {
    font-size:13px;
    color:var(--text-soft);
    margin-bottom:10px;
    line-height:1.4;
  }

  .small {
    font-size:11px;
    color:#9ca3af;
    margin-bottom:12px;
  }

  .btn-open {
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:8px 16px;
    border-radius:999px;
    border:1px solid var(--accent);
    background:var(--accent);
    color:white;
    font-size:13px;
    text-decoration:none;
    cursor:pointer;
    gap:6px;
  }

  .btn-open span.icon{
    font-size:14px;
  }

  @media (max-width:480px){
    .card{
      max-width:340px;
      width:94%;
    }
  }
</style>
</head>
<body>

<div class="card">
  <div class="mascot-wrap">
    <div class="mascot"></div>
    <div class="brand-text">MS Backup</div>
  </div>

  <div class="loader"></div>
  <div class="title" id="title">Openingâ€¦</div>
  <div class="desc" id="desc">Loading Google Driveâ€¦</div>
  <div class="small">If nothing happens, tap the button below.</div>
  <a id="openBtn" class="btn-open" href="#" target="_blank" rel="noopener">
    <span class="icon">ğŸ“‚</span>
    <span>Open in Google Drive</span>
  </a>
</div>

<script>
  // å–å¾—ç¶²å€åƒæ•¸
  const params = new URLSearchParams(location.search);
  const line = params.get("line");
  const section = params.get("section");
  const url = params.get("url");

  // æ›´æ–°é¡¯ç¤º
  if (line && section) {
    const niceLine = line.startsWith("Line") ? line.replace("Line","Line ") : line;
    document.getElementById("title").textContent =
      niceLine + " â€“ " + section;
    document.getElementById("desc").textContent =
      "Opening backup on Google Driveâ€¦";
  }

  // æŒ‰éˆ• href
  const btn = document.getElementById("openBtn");
  if (url && btn) {
    btn.href = url;
  }

  // è‡ªå‹•é–‹å•Ÿï¼šæ¡Œæ©Ÿé–‹æ–°åˆ†é  / æ‰‹æ©Ÿç›´æ¥å°å‘æ•´å€‹è¦–çª—
  if (url) {
    setTimeout(() => {
      const isSmall = window.matchMedia && window.matchMedia('(max-width: 768px)').matches;
      const isMobileUA = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);

      try {
        if (isSmall || isMobileUA) {
          // æ‰‹æ©Ÿï¼šç›´æ¥æŠŠæ•´å€‹ tab å°åˆ° Google Driveï¼ˆä¸èµ° popupï¼‰
          window.top.location.href = url;
        } else {
          // æ¡Œæ©Ÿï¼šé–‹æ–°åˆ†é 
          window.open(url, "_blank", "noopener");
        }
      } catch (e) {
        console.log('Auto open blocked:', e);
      }
    }, 600);
  }
</script>

</body>
</html>
